{"version":3,"file":"Header.js","sources":["../../../../../../src/v1/views/shared/Header.ts"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { View } from '@okta/courage';\nimport hbs from '@okta/handlebars-inline-precompile';\nimport Animations from 'util/Animations';\nimport LoadingBeacon from 'v1/views/shared/LoadingBeacon';\nconst NO_BEACON_CLS = 'no-beacon';\nconst LOADING_BEACON_CLS = 'beacon-small beacon-loading';\n\nfunction isLoadingBeacon(beacon) {\n  return beacon && beacon.equals(LoadingBeacon);\n}\n\nfunction removeBeacon(view) {\n  // There are some timing issues with removing beacons (i.e. the case of\n  // transitioning from loadingBeacon -> loadingBeacon)\n  if (!view.currentBeacon) {\n    return;\n  }\n  view.currentBeacon.remove();\n  view.currentBeacon = null;\n}\n\nfunction addBeacon(view, NextBeacon, selector, options) {\n  view.add(NextBeacon, {\n    selector: selector,\n    options: options,\n  });\n  view.currentBeacon = view.first();\n}\n\nfunction typeOfTransition(currentBeacon, NextBeacon, options) {\n  if (!currentBeacon && !NextBeacon) {\n    return 'none';\n  }\n  // Show Loading beacon\n  if (!currentBeacon && options.loading) {\n    return 'load';\n  }\n  // Swap/Hide Loading beacon\n  if (currentBeacon && isLoadingBeacon(currentBeacon)) {\n    return NextBeacon ? 'swap' : 'unload';\n  }\n  if (currentBeacon && currentBeacon.equals(NextBeacon, options)) {\n    return 'same';\n  }\n  if (!currentBeacon && NextBeacon) {\n    return 'add';\n  }\n  if (currentBeacon && !NextBeacon) {\n    return 'remove';\n  }\n  if (currentBeacon instanceof NextBeacon) {\n    return 'fade';\n  }\n  // If none of the above\n  // then we are changing the type of beacon\n  // ex. from SecurityBeacon to FactorBeacon\n  return 'swap';\n}\n\nexport default class Header extends View {\n  currentBeacon;\n  \n  preinitialize(...args) {\n    this.currentBeacon = null;\n    /* eslint-disable @okta/okta/no-unlocalized-text-in-templates */\n    this.template = hbs(\n      '\\\n        <div class=\"okta-sign-in-header auth-header\">\\\n          {{#if logo}}\\\n          <h1><img src=\"{{logo}}\" class=\"auth-org-logo\" alt=\"{{logoText}} logo\" aria-label=\"{{logoText}} logo\"></h1>\\\n          {{/if}}\\\n          <div data-type=\"beacon-container\" class=\"beacon-container\"></div>\\\n        </div>\\\n        <div class=\"auth-content\"><div class=\"auth-content-inner\"></div></div>\\\n      '\n    );\n    /* eslint-enable @okta/okta/no-unlocalized-text-in-templates */\n    View.prototype.preinitialize.apply(this, args);\n  }\n\n\n  // Attach a 'no-beacon' class if the security image feature\n  // is not passed in to prevent the beacon from jumping.\n  initialize(options) {\n    if (!options.settings.get('features.securityImage')) {\n      this.$el.addClass(NO_BEACON_CLS);\n      // To show/hide the spinner when there is no security image,\n      // listen to the appState's loading/removeLoading events.\n      this.listenTo(options.appState, 'loading', this.setLoadingBeacon);\n      this.listenTo(options.appState, 'removeLoading', this.removeLoadingBeacon);\n    }\n  }\n\n  /* eslint complexity: 0 */\n  setBeacon(NextBeacon, options) {\n    const selector = '[data-type=\"beacon-container\"]';\n    const container = this.$(selector);\n    const transition = typeOfTransition(this.currentBeacon, NextBeacon, options);\n\n    switch (transition) {\n    case 'none':\n      this.$el.addClass(NO_BEACON_CLS);\n      return;\n    case 'same':\n      return;\n    case 'add':\n      this.$el.removeClass(NO_BEACON_CLS);\n      addBeacon(this, NextBeacon, selector, options);\n      return Animations.explode(container);\n    case 'remove':\n      this.$el.addClass(NO_BEACON_CLS);\n      return Animations.implode(container)\n        .then(() => {\n          removeBeacon(this);\n        })\n        .done(); // TODO: can this be removed if Animations.implode returns standard ES6 Promise?\n    case 'fade':\n      // Other transitions are performed on the beacon container,\n      // but this transition is on the content inside the beacon.\n      // For a SecurityBeacon the username change will update the\n      // AppState and trigger an transition to a new Becon\n      // Since there is no url change this method is not called.\n      // For a FactorBeacon a page refresh has occurred\n      // so we execute the beacon's own transition method.\n      if (!this.currentBeacon.fadeOut) {\n        throw new Error('The current beacon is missing the \"fadeOut\" method');\n      }\n      options.animate = true;\n      return this.currentBeacon\n        .fadeOut()\n        .then(() => {\n          removeBeacon(this);\n          addBeacon(this, NextBeacon, selector, options);\n        })\n        .done(); // TODO: can this be removed if fadeOut returns standard ES6 Promise?\n    case 'swap':\n      return Animations.swapBeacons({\n        $el: container,\n        swap: () => {\n          const isLoading = isLoadingBeacon(this.currentBeacon);\n\n          // Order of these calls is important for -\n          // loader --> security/factor beacon swap.\n          removeBeacon(this);\n          this.$el.removeClass(NO_BEACON_CLS);\n          if (isLoading) {\n            container.removeClass(LOADING_BEACON_CLS);\n          }\n          addBeacon(this, NextBeacon, selector, options);\n        },\n      }).done(); // TODO: can this be removed if Animations.swapBeacons returns standard ES6 Promise?\n    case 'load':\n      // Show the loading beacon. Add a couple of classes\n      // before triggering the add beacon code.\n      container.addClass(LOADING_BEACON_CLS);\n      addBeacon(this, NextBeacon, selector, options);\n      return Animations.explode(container);\n    case 'unload':\n      // Hide the loading beacon.\n      return this.removeLoadingBeacon();\n    default:\n      throw new Error('the \"' + transition + '\" is not recognized');\n    }\n  }\n\n  // Show the loading beacon when the security image feature is not enabled.\n  setLoadingBeacon(isLoading) {\n    if (!isLoading || isLoadingBeacon(this.currentBeacon)) {\n      return;\n    }\n    this.setBeacon(LoadingBeacon, { loading: true });\n  }\n\n  // Hide the beacon on primary auth failure. On primary auth success, setBeacon does this job.\n  removeLoadingBeacon() {\n    if (!isLoadingBeacon(this.currentBeacon)) {\n      return;\n    }\n\n    const container = this.$('[data-type=\"beacon-container\"]');\n\n    return Animations.implode(container)\n      .then(() => {\n        removeBeacon(this);\n        container.removeClass(LOADING_BEACON_CLS);\n      })\n      .done(); // TODO: can this be removed if Animations.implode returns standard ES6 Promise?\n  }\n\n  getTemplateData() {\n    return this.settings.toJSON({ verbose: true });\n  }\n\n  getContentEl() {\n    return this.$('.auth-content-inner');\n  }\n}\n"],"names":["NO_BEACON_CLS","LOADING_BEACON_CLS","isLoadingBeacon","beacon","equals","LoadingBeacon","removeBeacon","view","currentBeacon","remove","addBeacon","NextBeacon","selector","options","add","first","typeOfTransition","loading","Header","View","constructor","args","preinitialize","template","_Handlebars2","1","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","undefined","main","stack1","program","noop","apply","initialize","settings","get","$el","addClass","listenTo","appState","setLoadingBeacon","removeLoadingBeacon","setBeacon","$","transition","removeClass","Animations","explode","implode","then","done","fadeOut","Error","animate","swapBeacons","swap","isLoading","getTemplateData","toJSON","verbose","getContentEl"],"mappings":"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"}