{"version":3,"file":"FooterSignout.js","sources":["../../../../../../src/v1/views/shared/FooterSignout.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2016, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { _, View, loc, internal } from '@okta/courage';\nimport hbs from '@okta/handlebars-inline-precompile';\nimport Enums from 'util/Enums';\nconst { Util } = internal.util;\nexport default View.extend({\n  template: hbs(\n    '\\\n      <a href=\"#\" class=\"link {{linkClassName}}\" data-se=\"signout-link\">\\\n        {{linkText}}\\\n      </a>\\\n    '\n  ),\n  className: 'auth-footer clearfix',\n  events: {\n    'click a[data-se=\"signout-link\"]': 'handleSignout',\n  },\n  handleSignout: function(e) {\n    e.preventDefault();\n\n    const appState = this.options.appState;\n    appState.trigger('signOut');\n    const isSMSPasswordRecovery = appState.get('isSMSPasswordRecovery');\n\n    this.model\n      .doTransaction(function(transaction) {\n        // `clearTransactionData` was added as a temporary fix for the issue reported in OKTA-487220\n        // OKTA-515889 was created to address the underlying issue on the `transaction.cancel` level\n        // and this temporary fix will be removed after that ticket is done\n        return transaction.cancel().then(clearTransactionData);\n      })\n      .then(() => {\n        if (this.settings.get('backToSignInUri') && !isSMSPasswordRecovery) {\n          Util.redirect(this.settings.get('backToSignInUri'));\n        } else {\n          this.state.set('navigateDir', Enums.DIRECTION_BACK);\n          appState.trigger('navigate', '');\n        }\n      });\n  },\n  getTemplateData: function() {\n    return {\n      linkClassName: _.isUndefined(this.options.linkClassName) ? 'goto' : this.options.linkClassName,\n      linkText: this.options.linkText || loc('goback', 'login'),\n    };\n  },\n});\n\n// TODO: remove after OKTA-515889 is done\nfunction clearTransactionData(transaction) {\n  return { ...transaction, data: null };\n}\n"],"names":["Util","internal","util","View","extend","template","_Handlebars2","main","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","undefined","className","events","handleSignout","e","preventDefault","appState","options","trigger","isSMSPasswordRecovery","get","model","doTransaction","transaction","cancel","then","clearTransactionData","settings","redirect","state","set","Enums","DIRECTION_BACK","getTemplateData","linkClassName","_","isUndefined","linkText","loc"],"mappings":"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"}