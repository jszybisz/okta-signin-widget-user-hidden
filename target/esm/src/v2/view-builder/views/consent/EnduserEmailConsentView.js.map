{"version":3,"file":"EnduserEmailConsentView.js","sources":["../../../../../../../src/v2/view-builder/views/consent/EnduserEmailConsentView.js"],"sourcesContent":["import { loc } from '@okta/courage';\nimport { BaseForm } from '../../internals';\nimport ConsentViewForm from './ConsentViewForm';\nimport BaseAuthenticatorView from '../../components/BaseAuthenticatorView';\nimport hbs from '@okta/handlebars-inline-precompile';\nimport EmailAuthenticatorHeader from '../../components/EmailAuthenticatorHeader';\n\nconst getInfo = hbs`\n  {{#if browser}}\n    <div class=\"enduser-email-consent--info no-translate\">\n      <i class=\"enduser-email-consent--icon icon--desktop\"></i>\n      <div>{{browser}}</div>\n    </div>\n  {{/if}}\n  {{#if app}}\n    <div class=\"enduser-email-consent--info no-translate\">\n      <i class=\"enduser-email-consent--icon icon--app\"></i>\n      <div>{{app}}</div>\n    </div>\n  {{/if}}`;\nconst enduserEmailConsentViewBody = ConsentViewForm.extend({\n  className: 'enduser-email-consent',\n\n  title() {\n    return loc('oie.consent.enduser.title', 'login');\n  },\n  save() {\n    return loc('oie.consent.enduser.accept.label', 'login');\n  },\n  cancel() {\n    return loc('oie.consent.enduser.deny.label', 'login');\n  },\n  initialize() {\n    BaseForm.prototype.initialize.apply(this, arguments);\n    const info = getInfo(this.model.pick('browser', 'app'));\n    this.add(info);\n  },\n  getUISchema() {\n    const uiSchemas = BaseForm.prototype.getUISchema.apply(this, arguments);\n    return uiSchemas.filter(uiSchema => uiSchema.name !== 'consent' );\n  },\n});\n\nexport default BaseAuthenticatorView.extend({\n  Header: EmailAuthenticatorHeader,\n\n  buttonOrder: ['cancel', 'save'],\n\n  postRender() {\n    const buttonContainer = this.$el.find('.o-form-button-bar');\n    buttonContainer.find('.button-primary').removeClass('button-primary');\n  },\n\n  Body: enduserEmailConsentViewBody,\n\n  createModelClass({ requestInfo }) {\n    const ModelClass = BaseAuthenticatorView.prototype.createModelClass.apply(this, arguments);\n    const browser = requestInfo.find(({ name }) => name === 'browser');\n    const app = requestInfo.find(({ name }) => name === 'appName');\n\n    const local = Object.assign({\n      browser: {\n        type: 'string',\n        value: browser?.value\n      },\n      app: {\n        type: 'string',\n        value: app?.value\n      },\n    }, ModelClass.prototype.local );\n    return ModelClass.extend({\n      local,\n      toJSON() {\n        return {\n          consent: this.get('consent'),\n        };\n      },\n    });\n  }\n});\n"],"names":["getInfo","_Handlebars2","template","1","container","depth0","helpers","partials","data","helper","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","undefined","escapeExpression","hooks","helperMissing","nullContext","3","main","stack1","alias1","program","noop","enduserEmailConsentViewBody","ConsentViewForm","extend","className","title","loc","save","cancel","initialize","BaseForm","apply","arguments","info","model","pick","add","getUISchema","uiSchemas","filter","uiSchema","name","BaseAuthenticatorView","Header","EmailAuthenticatorHeader","buttonOrder","postRender","buttonContainer","$el","find","removeClass","Body","createModelClass","requestInfo","ModelClass","browser","app","local","assign","type","value","toJSON","consent","get"],"mappings":"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"}