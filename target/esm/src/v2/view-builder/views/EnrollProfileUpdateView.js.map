{"version":3,"file":"EnrollProfileUpdateView.js","sources":["../../../../../../src/v2/view-builder/views/EnrollProfileUpdateView.js"],"sourcesContent":["import { loc, View } from '@okta/courage';\nimport { BaseFooter, BaseForm, BaseView } from '../internals';\nimport hbs from '@okta/handlebars-inline-precompile';\nimport { getSkipSetupLink } from '../utils/LinksUtil';\n\nconst Body = BaseForm.extend({\n\n  className: 'profile-update',\n\n  title() {\n    return loc('oie.profile.additional.title', 'login');\n  },\n  \n  save() {\n    return loc('enroll.choices.submit.finish', 'login');\n  },\n\n  getUISchema() {\n    const uiSchemas = BaseForm.prototype.getUISchema.apply(this, arguments);\n    uiSchemas.forEach(input => {\n      if (input.name === 'userProfile.secondEmail') {\n        input.explain = View.extend({\n          template: hbs`{{{i18n\n            code=\"oie.profile.additional.secondemail.subtitle\"\n            bundle=\"login\" \n            $1=\"<span class='strong'>$1</span>\"}}}`\n        });\n      }\n    });\n    \n    return uiSchemas;\n  },\n\n  initialize() {\n    BaseForm.prototype.initialize.apply(this, arguments);\n  },\n});\n\nconst Footer = BaseFooter.extend({\n  className: 'auth-footer side-by-side-links',\n  links: function() {\n    const { uiSchema } = this.options.currentViewState;\n    const optionalParams = uiSchema.filter(item => item.required === false);\n    if(uiSchema.length === optionalParams.length) {\n      return getSkipSetupLink(this.options.appState, loc('oie.enroll.skip.profile', 'login'));\n    } else {\n      this.$el.removeClass('.side-by-side-links');\n    }\n  }\n});\n\nexport default BaseView.extend({\n  Body,\n  Footer,\n\n  postRender() {\n    BaseView.prototype.postRender.apply(this, arguments);\n    /**\n     * As per requirement of this flow set secondEmail default to empty string, if exists in remediation\n     * ideally server should have passed default string in remediation\n     */\n    if (this.options.appState.getSchemaByName('userProfile.secondEmail')) {\n      this.model.set('userProfile.secondEmail', '');\n    }\n  }\n});"],"names":["Body","BaseForm","extend","className","title","loc","save","getUISchema","uiSchemas","prototype","apply","arguments","forEach","input","name","explain","View","template","_Handlebars2","main","container","depth0","helpers","partials","data","stack1","lookupProperty","parent","propertyName","Object","hasOwnProperty","call","undefined","hooks","helperMissing","nullContext","initialize","Footer","BaseFooter","links","uiSchema","options","currentViewState","optionalParams","filter","item","required","length","getSkipSetupLink","appState","$el","removeClass","BaseView","postRender","getSchemaByName","model","set"],"mappings":"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"}