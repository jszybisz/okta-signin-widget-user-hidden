{"version":3,"file":"SelectEnrollmentChannelOktaVerifyView.js","sources":["../../../../../../../src/v2/view-builder/views/ov/SelectEnrollmentChannelOktaVerifyView.js"],"sourcesContent":["import { loc, _ } from '@okta/courage';\nimport { BaseForm } from '../../internals';\nimport BaseAuthenticatorView from '../../components/BaseAuthenticatorView';\nimport BrowserFeatures from '../../../../util/BrowserFeatures';\nimport SameDeviceEnrollLink from './SameDeviceEnrollLink';\n\nconst Body = BaseForm.extend({\n  title() {\n    return (BrowserFeatures.isAndroid() || BrowserFeatures.isIOS())\n      ? loc('oie.enroll.okta_verify.setup.title', 'login')\n      : loc('oie.enroll.okta_verify.select.channel.title.updated', 'login');\n  },\n  getUISchema() {\n    const schemas = BaseForm.prototype.getUISchema.apply(this, arguments);\n    // filter selected channel\n    const channelField = _.find(schemas, (schema) => schema.name === 'authenticator.channel');\n    // do not show the 'samedevice' radio option, that option is displayed as a link instead\n    channelField.options = _.filter(channelField?.options, (option) => (\n      option.value !== this.options.appState.get('currentAuthenticator')?.contextualData?.selectedChannel\n      && option.value !== 'samedevice'\n    ));\n    channelField.value = channelField.options[0]?.value;\n    channelField.sublabel = null;\n    this.model.set('authenticator.channel', channelField.value);\n    const description = {\n      View: loc('oie.enroll.okta_verify.select.channel.subtitle', 'login'),\n      selector: '.o-form-fieldset-container',\n    };\n    return [description, ...schemas];\n  },\n});\n\nexport default BaseAuthenticatorView.extend({\n  Body,\n  postRender() {\n    const authenticatorFormValues = this.options.currentViewState.value\n      ?.find(val => val.name === 'authenticator').value.form.value;\n    const sameDeviceChannelAvailable = authenticatorFormValues\n      ?.find(val => val.name === 'channel').options?.find(channel => channel.value === 'samedevice');\n    // only add this link if the samedevice channel is available in the remediation\n    if (sameDeviceChannelAvailable) {\n      this.add(new SameDeviceEnrollLink({\n        model: this.model,\n        settings: this.settings,\n        appState: this.options.appState\n      }), 'form');\n    }\n  },\n});\n"],"names":["Body","BaseForm","extend","title","BrowserFeatures","isAndroid","isIOS","loc","getUISchema","_channelField$options","schemas","prototype","apply","arguments","channelField","_","find","schema","name","options","filter","option","_this$options$appStat","_this$options$appStat2","value","appState","get","contextualData","selectedChannel","sublabel","model","set","description","View","selector","BaseAuthenticatorView","postRender","_this$options$current","_authenticatorFormVal","authenticatorFormValues","currentViewState","val","form","sameDeviceChannelAvailable","channel","add","SameDeviceEnrollLink","settings"],"mappings":"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"}